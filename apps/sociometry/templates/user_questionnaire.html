{% extends 'base.html' %}
{% block content %}
<section class="card">
  <h2>{{ measurement.name }}</h2>
  <p class="instruction">{{ texts.instruction }}</p>
  <form method="post">
    <label>{{ texts.your_name }}
      <select name="respondent_name" required>
        {% for n in names %}
          <option value="{{ n }}" {% if selected_respondent == n %}selected{% endif %}>{{ n }}</option>
        {% endfor %}
      </select>
    </label>

    {% for q in questions %}
      <fieldset>
        <legend>{{ loop.index }}. {{ q.question_text }}</legend>
        {% set answer_key = q.question_index|string %}
        {% for n in names %}
          <label class="check check-vertical">
            <span class="check-name">{{ n }}</span>
            <input
              type="checkbox"
              class="check-box"
              name="q_{{ q.question_index }}"
              value="{{ n }}"
              {% if n in (selected_answers.get(answer_key, [])) %}checked{% endif %}
            />
          </label>
        {% endfor %}
      </fieldset>
    {% endfor %}

    <button class="btn" type="submit">{{ texts.submit }}</button>
  </form>
</section>
{% endblock %}
